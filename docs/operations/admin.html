

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Administration interface &mdash; envoy 1.0.0 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="envoy 1.0.0 documentation" href="../index.html"/>
        <link rel="up" title="Operations and administration" href="operations.html"/>
        <link rel="next" title="Statistics overview" href="stats_overview.html"/>
        <link rel="prev" title="Hot restart Python wrapper" href="hot_restarter.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> envoy
          

          
          </a>

          
            
            
              <div class="version">
                1.0.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../about_docs.html">About the documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../intro/intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../install/install.html">Building and installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../configuration/configuration.html">Configuration reference</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="operations.html">Operations and administration</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="cli.html">Command line options</a></li>
<li class="toctree-l2"><a class="reference internal" href="hot_restarter.html">Hot restart Python wrapper</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Administration interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="stats_overview.html">Statistics overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="runtime.html">Runtime</a></li>
<li class="toctree-l2"><a class="reference internal" href="fs_flags.html">File system flags</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../extending/extending.html">Extending Envoy for custom use cases</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">envoy</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
          <li><a href="operations.html">Operations and administration</a> &raquo;</li>
      
    <li>Administration interface</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/operations/admin.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="administration-interface">
<span id="operations-admin-interface"></span><h1>Administration interface<a class="headerlink" href="#administration-interface" title="Permalink to this headline">¶</a></h1>
<p>Envoy exposes a <a class="reference internal" href="../configuration/overview/admin.html#config-admin"><span class="std std-ref">local administration interface</span></a> that can be used to query and
modify different aspects of the server.</p>
<dl class="get">
<dt id="get--">
<code class="descname">GET </code><code class="descname">/</code><a class="headerlink" href="#get--" title="Permalink to this definition">¶</a></dt>
<dd><p>Print a menu of all available options.</p>
</dd></dl>

<dl class="get">
<dt id="get--certs">
<code class="descname">GET </code><code class="descname">/certs</code><a class="headerlink" href="#get--certs" title="Permalink to this definition">¶</a></dt>
<dd><p>List out all loaded TLS certificates, including file name, serial number, and days until
expiration.</p>
</dd></dl>

<dl class="get">
<dt id="get--clusters">
<code class="descname">GET </code><code class="descname">/clusters</code><a class="headerlink" href="#get--clusters" title="Permalink to this definition">¶</a></dt>
<dd><p>List out all configured <a class="reference internal" href="../intro/arch_overview/cluster_manager.html#arch-overview-cluster-manager"><span class="std std-ref">cluster manager</span></a> clusters. This
information includes all discovered upstream hosts in each cluster along with per host statistics.
This is useful for debugging service discovery issues. The per host statistics include:</p>
<table border="1" class="docutils">
<colgroup>
<col width="25%" />
<col width="25%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>cx_total</td>
<td>Counter</td>
<td>Total connections</td>
</tr>
<tr class="row-odd"><td>cx_active</td>
<td>Gauge</td>
<td>Total active connections</td>
</tr>
<tr class="row-even"><td>cx_connect_fail</td>
<td>Counter</td>
<td>Total connection failures</td>
</tr>
<tr class="row-odd"><td>rq_total</td>
<td>Counter</td>
<td>Total requests</td>
</tr>
<tr class="row-even"><td>rq_active</td>
<td>Gauge</td>
<td>Total active requests</td>
</tr>
<tr class="row-odd"><td>healthy</td>
<td>Boolean</td>
<td>Whether the host is healthy (1) or not (0)</td>
</tr>
<tr class="row-even"><td>weight</td>
<td>Integer</td>
<td>Load balancing weight (1-100)</td>
</tr>
<tr class="row-odd"><td>zone</td>
<td>String</td>
<td>Service zone</td>
</tr>
<tr class="row-even"><td>canary</td>
<td>Boolean</td>
<td>Whether the host is a canary</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="get">
<dt id="get--cpuprofiler">
<code class="descname">GET </code><code class="descname">/cpuprofiler</code><a class="headerlink" href="#get--cpuprofiler" title="Permalink to this definition">¶</a></dt>
<dd><p>Enable or disable the CPU profiler. Requires compiling with gperftools.</p>
</dd></dl>

<dl class="get">
<dt id="get--healthcheck-fail">
<code class="descname">GET </code><code class="descname">/healthcheck/fail</code><a class="headerlink" href="#get--healthcheck-fail" title="Permalink to this definition">¶</a></dt>
<dd><p>Fail inbound health checks. This requires the use of the HTTP <a class="reference internal" href="../configuration/http_filters/health_check_filter.html#config-http-filters-health-check"><span class="std std-ref">health check filter</span></a>. This is useful for draining a server prior to shutting it
down or doing a full restart. Invoking this command will universally fail health check requests
regardless of how the filter is configured (pass through, etc.).</p>
</dd></dl>

<dl class="get">
<dt id="get--healthcheck-ok">
<code class="descname">GET </code><code class="descname">/healthcheck/ok</code><a class="headerlink" href="#get--healthcheck-ok" title="Permalink to this definition">¶</a></dt>
<dd><p>Negate the effect of <a class="reference internal" href="#get--healthcheck-fail" title="GET /healthcheck/fail"><code class="xref http http-get docutils literal"><span class="pre">GET</span> <span class="pre">/healthcheck/fail</span></code></a>. This requires the use of the HTTP
<a class="reference internal" href="../configuration/http_filters/health_check_filter.html#config-http-filters-health-check"><span class="std std-ref">health check filter</span></a>.</p>
</dd></dl>

<dl class="get">
<dt id="get--hot_restart_version">
<code class="descname">GET </code><code class="descname">/hot_restart_version</code><a class="headerlink" href="#get--hot_restart_version" title="Permalink to this definition">¶</a></dt>
<dd><p>See <a class="reference internal" href="cli.html#cmdoption--hot-restart-version"><code class="xref std std-option docutils literal"><span class="pre">--hot-restart-version</span></code></a>.</p>
</dd></dl>

<dl class="get">
<dt id="get--logging">
<code class="descname">GET </code><code class="descname">/logging</code><a class="headerlink" href="#get--logging" title="Permalink to this definition">¶</a></dt>
<dd><p>Enable/disable different logging levels on different subcomponents. Generally only used during
development.</p>
</dd></dl>

<dl class="get">
<dt id="get--quitquitquit">
<code class="descname">GET </code><code class="descname">/quitquitquit</code><a class="headerlink" href="#get--quitquitquit" title="Permalink to this definition">¶</a></dt>
<dd><p>Cleanly exit the server.</p>
</dd></dl>

<dl class="get">
<dt id="get--reset_counters">
<code class="descname">GET </code><code class="descname">/reset_counters</code><a class="headerlink" href="#get--reset_counters" title="Permalink to this definition">¶</a></dt>
<dd><p>Reset all counters to zero. This is useful along with <a class="reference internal" href="#get--stats" title="GET /stats"><code class="xref http http-get docutils literal"><span class="pre">GET</span> <span class="pre">/stats</span></code></a> during debugging. Note
that this does not drop any data sent to statsd. It just effects local output of the
<a class="reference internal" href="#get--stats" title="GET /stats"><code class="xref http http-get docutils literal"><span class="pre">GET</span> <span class="pre">/stats</span></code></a> command.</p>
</dd></dl>

<dl class="get">
<dt id="get--server_info">
<code class="descname">GET </code><code class="descname">/server_info</code><a class="headerlink" href="#get--server_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Outputs information about the running server. Sample output looks like:</p>
</dd></dl>

<div class="highlight-none"><div class="highlight"><pre><span></span>envoy 267724/RELEASE live 1571 1571 0
</pre></div>
</div>
<p>The fields are:</p>
<ul class="simple">
<li>Process name</li>
<li>Compiled SHA and build type</li>
<li>Health check state (live or draining)</li>
<li>Current hot restart epoch uptime in seconds</li>
<li>Total uptime in seconds (across all hot restarts)</li>
<li>Current hot restart epoch</li>
</ul>
<dl class="get">
<dt id="get--stats">
<code class="descname">GET </code><code class="descname">/stats</code><a class="headerlink" href="#get--stats" title="Permalink to this definition">¶</a></dt>
<dd><p>Outputs all statistics on demand. This includes only counters and gauges. Timers are not output as
Envoy currently has no built in histogram support and relies on statsd for timer aggregation. This
command is very useful for local debugging. See <a class="reference internal" href="stats_overview.html#operations-stats"><span class="std std-ref">here</span></a> for more
information.</p>
</dd></dl>

</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="stats_overview.html" class="btn btn-neutral float-right" title="Statistics overview" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="hot_restarter.html" class="btn btn-neutral" title="Hot restart Python wrapper" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Lyft.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.0.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>